# 手繪風手帳 - 新功能說明

## 新增功能總覽

### 1. 📅 日曆視圖
- **位置**: 首頁 → 點擊「日曆」按鈕
- **功能**:
  - 以月曆形式顯示所有日記
  - 每天顯示該日的日記標題和心情
  - 點擊有日記的日期可直接跳轉到該篇日記
  - 可切換不同月份瀏覽
  - 今天的日期會特別標示

### 2. 📊 心情統計圖表
- **位置**: 首頁 → 點擊「統計」按鈕
- **功能**:
  - **心情統計**: 顯示各種心情的次數和百分比,以進度條呈現
  - **熱門標籤**: 顯示最常使用的前10個標籤
  - **寫作統計**: 顯示總日記數、包含圖片數、記錄心情數、不同標籤數

### 3. 🔍 進階篩選功能
- **位置**: 首頁列表視圖 → 點擊「進階篩選」按鈕
- **功能**:
  - **搜尋關鍵字**: 在標題或內容中搜尋
  - **日期範圍**: 篩選特定時間區間的日記
  - **多心情篩選**: 可同時選擇多個心情進行篩選
  - **多標籤篩選**: 可同時選擇多個標籤進行篩選
  - 顯示目前啟用的篩選條件數量
  - 一鍵清除所有篩選

### 4. 💬 評論功能
- **位置**: 任一日記詳細頁面底部
- **功能**:
  - 為日記新增留言
  - 顯示留言者姓名和時間
  - 可刪除自己的留言
  - 日記作者可刪除任何留言
  - 顯示留言總數

### 5. 🔗 社交分享
- **位置**: 日記詳細頁面右上角
- **功能**:
  - 分享到 Facebook
  - 分享到 Twitter
  - 分享到 LINE
  - 複製連結
  - 支援原生分享 API (如果裝置支援)

### 6. 🔔 提醒通知
- **位置**: 點擊右下角紫色鈴鐺按鈕 (手機版) 或導航到 `/reminders`
- **功能**:
  - 設定提醒標題、訊息和時間
  - 顯示即將到來的提醒
  - 顯示已完成/過期的提醒
  - 到時間時發送瀏覽器通知 (需授權)
  - 可隨時刪除提醒
  - 每10秒自動檢查提醒時間

## 後端 API 更新

### 新增 API 端點

#### 評論相關
- `POST /api/posts/:id/comments` - 新增評論
- `DELETE /api/posts/:id/comments/:commentId` - 刪除評論

#### 提醒相關
- `GET /api/reminders` - 取得所有提醒
- `POST /api/reminders` - 新增提醒
- `PUT /api/reminders/:id` - 更新提醒
- `DELETE /api/reminders/:id` - 刪除提醒

## 資料結構更新

### Post Model
```javascript
{
  ...原有欄位,
  comments: [
    {
      userId: ObjectId,
      username: String,
      content: String,
      createdAt: Number
    }
  ]
}
```

### Reminder Model (新增)
```javascript
{
  userId: ObjectId,
  title: String,
  message: String,
  scheduledTime: Number,
  isActive: Boolean,
  createdAt: Number
}
```

## 使用方式

1. **啟動後端伺服器**:
   ```bash
   cd server
   npm install
   npm start
   ```

2. **啟動前端**:
   ```bash
   npm install
   npm run dev
   ```

3. **首次使用提醒功能**:
   - 瀏覽器會請求通知權限,請點擊「允許」

## 注意事項

1. **瀏覽器通知**:
   - 需要用戶授予通知權限
   - 某些瀏覽器在非 HTTPS 環境下可能無法使用通知功能

2. **社交分享**:
   - 需要在可訪問的網址上才能正常分享
   - 本地開發環境分享的連結可能無法正常開啟

3. **進階篩選**:
   - 可以同時使用多個篩選條件
   - 簡單搜尋框和進階篩選可以一起使用

4. **評論功能**:
   - 評論會即時顯示
   - 刪除評論需要是評論作者或日記作者

## 技術棧

- **前端**: React 19, TypeScript, React Router, date-fns, lucide-react
- **後端**: Node.js, Express, MongoDB, Mongoose
- **新增依賴**: 所有必要的類型定義和組件都已包含

祝您使用愉快! 📓✨
